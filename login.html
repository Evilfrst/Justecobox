<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JustEcoBox | Solution Anti-Gaspi √âtudiante</title>
    <meta name="description"
        content="JustEcoBox - L'application anti-gaspillage pour les √©tudiants. R√©servez vos paniers HyperFresh √† prix r√©duit.">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- QR Code Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="dashboard-responsive.css">

    <!-- Favicons & App Icons -->
    <link rel="icon" type="image/x-icon" href="icon/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="icon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="192x192" href="icon/icon-192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="icon/icon-512.png">
    <link rel="manifest" href="manifest.json">
</head>

<body class="light-mode">
    <!-- Preloader -->
    <div id="preloader"
        style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; z-index: 9999; display: flex; flex-direction: column; align-items: center; justify-content: center; transition: opacity 0.5s ease; overflow: hidden;">
        <div style="position: relative; width: 120px; height: 120px;">
            <div
                style="position: absolute; width: 100%; height: 100%; border: 4px solid #f3f4f6; border-top: 4px solid var(--primary); border-radius: 50%; animation: spin 1s linear infinite;">
            </div>
            <img src="logo.png"
                style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 60px; height: 60px; object-fit: contain;">
        </div>
        <h3
            style="margin-top: 2rem; color: var(--primary); font-weight: 700; letter-spacing: 2px; animation: pulse 1.5s infinite;">
            JUSTECOBOX</h3>
        <p style="color: var(--text-muted); font-size: 0.9rem; margin-top: 0.5rem;">Le bon repas avant la date</p>

        <style>
            @keyframes spin {
                0% {
                    transform: rotate(0deg);
                }

                100% {
                    transform: rotate(360deg);
                }
            }

            @keyframes pulse {

                0%,
                100% {
                    opacity: 1;
                }

                50% {
                    opacity: 0.5;
                }
            }
        </style>
    </div>

    <div id="app">
        <!-- Navigation Sidebar (Admin) / Sidebar (Student - Optional) -->
        <aside id="sidebar" class="hidden">
            <div class="sidebar-header">
                <div class="logo">
                    <img src="logo.png" alt="JustEcoBox" class="logo-image">
                    <span class="logo-text">JustEcoBox</span>
                </div>
            </div>
            <nav class="sidebar-nav">
                <!-- Navigation items will be injected by JS depending on role -->
            </nav>
            <div class="sidebar-footer">
                <button id="switch-role" class="btn-role-switch">
                    <i class="fas fa-exchange-alt"></i>
                    <span>Mode √âtudiant</span>
                </button>
            </div>
        </aside>

        <main id="main-content">
            <!-- Header -->
            <header id="top-bar">
                <div class="header-left">
                    <button id="menu-toggle" class="btn-icon">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h2 id="page-title">Dashboard</h2>
                </div>
                <div class="header-right">
                    <a href="home.html" class="btn-home" title="Retour √† l'accueil">
                        <i class="fas fa-home"></i>
                        <span class="home-text">Accueil</span>
                    </a>
                    <div class="notification-bell">
                        <i class="fas fa-bell"></i>
                        <span class="badge">3</span>
                    </div>
                    <div class="user-profile">
                        <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Felix" alt="Avatar" class="avatar">
                        <div class="user-info">
                            <span class="user-name">HyperFresh</span>
                            <span class="user-role">Manager</span>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Dynamic Content Area -->
            <div id="content-view">
                <!-- Views will be loaded here -->
            </div>

            <!-- Bottom Navigation (Student Mobile View) -->
            <nav class="bottom-nav">
                <div class="bottom-nav-item active" onclick="navigateTo('explorer')">
                    <i class="fas fa-search"></i>
                    <span>Explorer</span>
                </div>
                <div class="bottom-nav-item" onclick="navigateTo('my-reservations')">
                    <i class="fas fa-shopping-bag"></i>
                    <span>Mes paniers</span>
                </div>
                <div class="bottom-nav-item" onclick="navigateTo('recipes')">
                    <i class="fas fa-utensils"></i>
                    <span>Recettes</span>
                </div>
                <div class="bottom-nav-item" onclick="navigateTo('impact')">
                    <i class="fas fa-leaf"></i>
                    <span>Impact</span>
                </div>
                <div class="bottom-nav-item" onclick="navigateTo('profile')">
                    <i class="fas fa-user"></i>
                    <span>Profil</span>
                </div>
            </nav>
        </main>

        <!-- AI Assistant Floating Button -->
        <div id="ai-assistant-container">
            <button id="ai-toggle" class="btn-ai-fab">
                <i class="fas fa-robot"></i>
            </button>
            <div id="ai-chat-window" class="hidden">
                <div class="chat-header">
                    <div class="ai-status">
                        <span class="status-dot"></span>
                        <span>JEB</span>
                    </div>
                    <button id="close-chat" class="btn-icon-small"><i class="fas fa-times"></i></button>
                </div>
                <div id="chat-messages">
                    <div class="message ai">
                        Salut ! Je suis JEB. Comment puis-je t'aider √† optimiser tes paniers
                        aujourd'hui ?
                    </div>
                </div>
                <div class="chat-input-area">
                    <input type="text" id="chat-input" placeholder="Pose-moi une question...">
                    <button id="send-msg"><i class="fas fa-paper-plane"></i></button>
                </div>
            </div>
        </div>
    </div>

    <!-- Dynamic Notification Panel -->
    <div id="notification-panel">
        <div class="notif-header">
            <h4 style="margin: 0; font-weight: 700; color: var(--primary);">Centre de Notifications</h4>
            <button class="btn-icon" onclick="toggleNotif(false)"><i class="fas fa-times"></i></button>
        </div>
        <div class="notif-list">
            <div class="notif-item">
                <h5>üèôÔ∏è Panier disponible !</h5>
                <p>Un nouveau panier est disponible chez Bio C Bon Paris 5.</p>
                <span style="font-size: 0.7rem; color: var(--primary);">Il y a 5 min</span>
            </div>
            <div class="notif-item" style="border-left-color: var(--secondary);">
                <h5>üéÅ Parrainage r√©ussi</h5>
                <p>Ton ami Marc a rejoint JustEcoBox. Tu as gagn√© 100 points !</p>
                <span style="font-size: 0.7rem; color: var(--secondary);">Il y a 2h</span>
            </div>
            <div class="notif-item" style="border-left-color: #ef4444;">
                <h5>‚ö†Ô∏è Retrait imminent</h5>
                <p>N'oublie pas de r√©cup√©rer ton panier chez HyperFresh avant 19h.</p>
                <span style="font-size: 0.7rem; color: #ef4444;">Urgant</span>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div id="modal-overlay" class="hidden">
        <div class="modal">
            <div class="modal-header">
                <h3 id="modal-title">Titre</h3>
                <button class="close-modal"><i class="fas fa-times"></i></button>
            </div>
            <div id="modal-body" class="modal-content">
                <!-- Form or content -->
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>

</html>